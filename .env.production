# ============================================================================
# OpenAssess Production Environment Configuration
# ============================================================================
# Copy this file to .env and update with your production values
# NEVER commit your .env file to version control!

# ============================================================================
# Application Settings
# ============================================================================
# Environment mode: 'dev' or 'production'
ENV=production

# Docker image to use (leave commented to build locally, or set to use registry image)
# DOCKER_IMAGE=openassess:latest

# Seed database with demo users (set to 'true' only for first run, then 'false')
SEED_DB=false

# Your domain name (e.g., openassess.yourdomain.com)
DOMAIN=openassess.yourdomain.com

# Frontend URL for CORS (must match your actual URL)
FRONTEND_URL=http://openassess.yourdomain.com

# ============================================================================
# Frontend Configuration (Next.js)
# ============================================================================
# Backend host for API proxying (defaults to localhost in Docker)
NEXT_PUBLIC_BACKEND_HOST=localhost
NEXT_PUBLIC_BACKEND_PORT=8000

# Allowed origins for CORS and server actions (comma-separated)
# Include your production domain and any other allowed origins
NEXT_PUBLIC_ALLOWED_ORIGINS=openassess.yourdomain.com,*.yourdomain.com

# ============================================================================
# Security Configuration
# ============================================================================
# CRITICAL: Generate a secure random key for JWT tokens
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_ME_GENERATE_SECURE_KEY

# JWT Algorithm (HS256 is recommended)
ALGORITHM=HS256

# JWT token expiration in minutes (default: 30)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# Database Configuration
# ============================================================================
# IMPORTANT: Change the password to something secure!
# Full database connection string
DATABASE_CONNECTION_STRING=postgresql://openassess:CHANGE_ME_SECURE_PASSWORD@postgres:5432/openassess

# Individual database settings (used by postgres container)
POSTGRES_DB=openassess
POSTGRES_USER=openassess
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# ============================================================================
# Storage Paths (inside container - usually no need to change)
# ============================================================================
JSON_STORAGE_PATH=storage/json/
QUESTION_PAPER_STORAGE_FOLDER=storage/pdfs/question_papers/
ANSWER_SHEET_STORAGE_FOLDER=storage/pdfs/answer_sheets/
ANNOTATION_STORAGE_FOLDER=storage/jsons/annotations/

# ============================================================================
# Traefik Configuration (if using Traefik)
# ============================================================================
# Traefik network name
TRAEFIK_NETWORK=traefik

# ============================================================================
# Optional: Testing Configuration (usually not needed in production)
# ============================================================================
# TEST_DATABASE_URL=postgresql://openassess:password@postgres:5432/openassess_test
# TEST_STUDENT_EMAIL=test.student@example.com
# TEST_STUDENT_PASSWORD=testpassword123
# TEST_LECTURER_EMAIL=test.lecturer@example.com
# TEST_LECTURER_PASSWORD=testpassword123

# ============================================================================
# Production Checklist
# ============================================================================
# [ ] Changed SECRET_KEY to a secure random value
# [ ] Changed POSTGRES_PASSWORD to a secure password
# [ ] Updated DOMAIN to your actual domain or IP
# [ ] Updated FRONTEND_URL to match your domain
# [ ] Set SEED_DB=false after first run
# [ ] Verified ENV=production
